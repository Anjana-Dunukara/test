1. CREATE TABLE CarRental;

2. & 3. 
CREATE TABLE Customer(
	customerid VARCHAR(10) NOT NULL,
	lastname VARCHAR(25) NOT NULL,
	firstname VARCHAR(25) NOT NULL,
	location VARCHAR(25) NOT NULL,
	postalcode VARCHAR(6) NOT NULL,
	PRIMARY KEY(customerid)
);

CREATE TABLE Car(
	modelid VARCHAR(2) NOT NULL,
	model VARCHAR(10) NOT NULL,
	mark VARCHAR(10) NOT NULL,
	year VARCHAR(4) NOT NULL,
	PRIMARY KEY(modelid)
);

CREATE TABLE Registration(
	registration_number VARCHAR(10) NOT NULL,
	modelid VARCHAR(2) NOT NULL,
	rate_per_day DECIMAL(8,2),
	PRIMARY KEY(registration_number),
	FOREIGN KEY(modelid) REFERENCES Car(modelid) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE Rent(
	rentid VARCHAR(2),
	customerid VARCHAR(10),
	registration_number VARCHAR(10),
	rent_date DATE,
	numbers_of_days VARCHAR(2),
	total_amount DECIMAL(10,2),
	PRIMARY KEY(rentid),
	FOREIGN KEY(customerid) REFERENCES Customer(customerid) ON DELETE CASCADE ON UPDATE CASCADE,
	FOREIGN KEY(registration_number) REFERENCES Registration(registration_number) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE OrderDetails(
	OrderNumber INT NOT NULL,
	QuantityOrder INT NOT NULL,
	Price INT NOT NULL,
	Total INT GENERATED ALWAYS AS (Price * QuantityOrder) STORED,
	CustomerName VARCHAR(15) NOT NULL,
	PRIMARY KEY(OrderNumber),
	FOREIGN KEY(CustomerName) REFERENCES Customer(CustomerName) ON DELETE CASCADE ON UPDATE CASCADE
);


INSERT INTO     
StudentDetails(First_name , Last_name , Date_Of_Birth , Class, Contact_Details)    
VALUES 
('Amit', 'Jana', '2004-12-22', 'XI', 1234567890),    
('Manik', 'Aggarwal', '2006-07-04', 'IX', 1245678998),    
('Nitin', 'Das', '2005-03-14', 'X', 2245664909),    
('Priya', 'Pal', '2007-07-24', 'VIII', 3245642199),    
('Biswanath', 'Sharma', '2005-11-11', 'X', 2456789761),    
('Mani', 'Punia', '2006-01-20', 'IX', 3245675421),    
('Pritam', 'Patel', '2008-01-04', 'VII', 3453415421),    
('Sayak', 'Sharma', '2007-05-10', 'VIII' , 1214657890);

LOAD DATA LOCAL INFILE 'C:/wamp64/bin/mysql/mysql5.7.36/data/test1/customer.txt' INTO TABLE Customer;
LOAD DATA LOCAL INFILE 'C:/wamp64/bin/mysql/mysql5.7.36/data/test1/car.txt' INTO TABLE Car;
LOAD DATA LOCAL INFILE 'C:/wamp64/bin/mysql/mysql5.7.36/data/test1/registration.txt' INTO TABLE Registration;
LOAD DATA LOCAL INFILE 'C:/wamp64/bin/mysql/mysql5.7.36/data/test1/rent.txt' INTO TABLE Rent;

LOAD DATA INFILE 'Directory Path/test.txt'
INTO TABLE employee
FIELDS TERMINATED BY ','
(age, first_name, income);

LOAD DATA LOCAL INFILE 'abc.csv' INTO TABLE abc
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\r\n

4. 
CREATE USER 'Kumar'@localhost IDENTIFIED BY '123';
grant insert on carrental.Car to 'Kumar'@localhost;
INSERT INTO Car VALUES
  ('4','Peugeot','407','2015'),
  ('5','Peugeot','307','2014');
  

5. 
CREATE USER 'Bandara'@localhost IDENTIFIED BY '123';
grant ALL PRIVILEGES on carrental.Registration to 'Bandara'@localhost;
UPDATE Registration SET modelid='5' WHERE modelid='1';
  

6.
revoke insert on carrental.Car from 'Kumar'@localhost;
revoke all privileges on carrental.registration from 'Bandara'@localhost;
  

7. 
delimiter ||
create procedure count_total_cars()
select count(*) as No_of_cars from Car;
||
delimiter ;
call procedure count_total_cars();


8. 
delimiter ||
create insert_data()
BEGIN
	insert into customer values
	('3','Martian','Andrew','Batticaloa','30000'),
	('4','Smith','Farida','Colombo','00100');
end ||
delimiter ;
call insert_data();


9. 
delimiter || 
create procedure update_table()
BEGIN
	update Registration set rate_per_day = rate_per_day+1000.00;
END || 
delimiter ;
call update_table();


10. 
a) create view renault_details as select * from car where model='Renault';
b) create view rent_rate as select rentid,(rate_per_day * numbers_of_days) as total_amount from rent as r JOIN registration as re ON r.registration_number=re.registration_number;
c) drop view renault_details, rent_rate;