





































***************************** 2017/2018 past paper ******************************************



Q(1).

(a) . steps to create vitual machine ..



I. Prerequisite
	1. Download virtual box using the website “virtualbox.org”.
	2. Install virtual box on your windows host.
	3. Download iso file of Ubuntu Server by visiting the website “ubuntu.com”

II. Creating Ubuntu Virtual Machine (VM)
	1. Start VirtualBox and click on New button to create new virtual machine.
	2. Enter name of VM 
	Ex. “Ubuntu_Server”
	3. Select OS Type: “Linux”
	4. Select Version: “Ubuntu(64bit)”
	5. Then Click to Next button.
	6. Set VM’s memory size to 2GB and click on Next button.
	7. Choose VM’s hard disk option to “Create a virtual hard disk now”.
	8. Adjust the disk size to 50GB.
	9. Click Next button.
	10. Click Finish button.
	
III. Setting up boot device


	1. Select the VM from left panel on Virtual Box, right click and open Settings.
	2. Click on Storage title and Select CD ROM icon under the Controller: IDE.
	3. Click on CD ROM icon under the Attribute on the left side to select.
	4. Choose Virtual Optical Disk File.
	5. Locate the Ubuntu CD image file you have.
	
IV. Setting up Network Interface.

	1. Click on Network title.
	2. While Enable Network Adapter selected, choose Attached to NAT then click Ok.



V. Installing Ubuntu Server.
	1) Initial installation settings.
	
	1) Start “Ubuntu_Server”.
	2) Select “Try or Install Ubuntu server”.
	3) Choose your preferred language as “English”.
	4) Choose “Continue without updating”.
	5) In keyboard configuration, select Keyboard layout and variant as “English (Us)”.
	6) In type of install, select “Ubuntu Server” and select “Search for third-party 
		drivers” in Additional options.
	7) In the Network Connection, keep the setting as it is.
	8) For Configure proxy, leave the proxy address blank.
	9) For Ubuntu mirror address, leave the default as it is.
	
	2) Disk Configuration.
		1. In guided storage configuration Select “Custom storage layout”
		
		
VI. SSH connection to the Guest OS
	1. Check ssh is installed in your Guest OS (Linux Server)
		• $ssh
	✓ If ssh not installed 
	I. Install ssh on Guest Os
		• $sudo apt install openssh-server
	2. Verify the ssh service is running.
		• $sudo systemctl status ssh.
	3. If the status is not active (running) enable the ssh server and start it.
		• $sudo systemctl enable ssh
		• $sudo systemctl start ssh
		
		
VII. Install Putty
	
	1. Download putty using the website “https://www.putty.org/”.
	2. Install putty on your windows host.

VIII. Virtual Box Settings

	1. Go to 
		Oracle Virtual Box Manager → Machine → Settings → Network → Adapter 1 →
		Advanced → Port Forwarding → Add
	
		• Name : ssh
		• Protocol : TCP
		• Host IP : 127.0.0.1
		• Host Port : 2222 (or any unused port)
		• Guest IP : 10.0.2.15 (Depends on your guest IP address)
		• Guest Port : 22
	
	2. Then click OK.
	
	3. Go to the putty on windows machine.
		• In hostname or ip address : 127.0.0.1
		• Port : 2222
		• Connection type : ssh
	
	4. Then click open.
(c)

	(i) Restart Ubuntu Server:
		 sudo reboot

	
	(ii) List the installed packages in Ubuntu Server:
			dpkg --list | grep '^ii'
	
	(iii)
	
	(iv)
	
	
	
(Q2).


	(a). identify network interfaces  
	
		$ip link show
	
	
	(b). add the ip address 10.0.2.20/24 to network interface enp03
	
		$sudo ip addr add 10.0.2.20/24 dev enp0s3
		
	(c).
	
	
		$sudo ip link set dev enp0s3 down
	
	(d).
	
		$sudo ip link set dev enp0s3 up

	(e).
	
		$ip address show dev enp0s3
	
	(f). Add temporary DNS
	
		$sudo vi /etc/resolv.conf

(Q4).


(a).add group

	sudo groupadd guestgroup
	
(b).add user to group

	sudo usermod -aG guestgroup guesttc
	
(c).

	sudo etc/groups
	
	
(d). delete user from group

	sudo gpasswd -d guest guestgroup
	





		
************************************* Changing the Screen Size *********************************************





1. Changing the Screen Size

	Open /etc/default/grub file.
	Type the below commands

	GRUB_GFXMODE=1280x1024 #width x height required
	GRUB_CMDLINE_LINUX_DEFAULT="nomodeset"
	GRUB_GFXPAYLOAD_LINUX=keep
	
	Save the file. Then issue the following commands

	sudo update-grub
	sudo reboot

2. Changing the Terminal Fontsize
	
	Open /etc/default/console-setup file.
	Change the values for font type and font size to

	FONTFACE="TER"
	FONTSIZE="16x32"
	Save the file. Then issue the following command
	sudo update-initramfs -u



************************************** USER, GROUP MANAGEMENT **************************************


• In Linux there are three types of users
1. Super / Root user - Powerful user, Administrator User
2. System user - users created by the Software /Applications
3. Normal user – the users created by root user (normal users)


• /etc/passwd – Keeps the user account name, acc group, acc description and 
password information. 
• /etc/shadow – Holds the encrypted password of the corresponding account.
• /etc/group –This files contains the group information for each account.
• /etc/gshadow – Holds the encrypted password of the corresponding group


$cat /etc/passwd

$cat /etc/shadow

$cat /etc/group

$cat /etc/gshadow

useradd command:
useradd -d /home/gem -g developers -c “GemThe Coder” -s /bin/ksh gem-dev


usermod command:
usermod –d /home/gem-new-m-l gem-dev gem-developer
▪ -d - Changing home directory to/home/gem-new
▪ -m - Create /home/gem-new directory is not available 
▪ -l - Change Login name to gem-developer


userdel command:
userdel Command:
userdel -r gem-developer


groupmod command:
groupmod -n <new_group_name> <old_group_name>
groupmod –n developers-new developers

groupdel command:
groupdel groupname


1. List users

cat /etc/passwd
# or
less /etc/passwd


2. List groups

cat /etc/group
# or
less /etc/group


3. Create a new user

sudo adduser new_username
# or
sudo useradd new_username



4. Change user password of set password for the new user

sudo passwd username


5. Add new group

sudo groupadd new_groupname


6. Add existing user to group

sudo usermod -aG groupname username



7. Removing user from group

sudo gpasswd -d username groupname


8. Change user primary group

sudo usermod -g new_primary_groupname username


9. Delete groups

sudo groupdel groupname



10. Delete users


sudo userdel username




************************************** Processes Handling in Ubuntu Server **************************************



1. List all process in current shell.

	$ ps
 
2. Display every active processes
 
	$ ps -A
	$ ps -e

3. Display all process and process not associated with terminal
	
	$ ps -au or
	$ ps -aux


4. To perform full-format listing.
	$ ps -ef OR $ ps -eF


5. To select all the process owned by the user.

	$ ps -x


6. To display users, process by real user id or name.


	$ ps -fu guesttc (your username)
	OR
	$ ps -fu 1002 (to see the user id: id -u username)


7. To Display root process


	$ ps -fu root
	OR
	$ ps -fu 0


7. To Display root process


	$ ps -fu root
	OR
	$ ps -fu 0


8. Display Group process

	$ ps -fg guesttc
	OR
	$ ps -fg 1008
	to find the group id getent group | grep mygroup) or (cat /etc/group | grep mygroup)


9. Display process by PID and PPID

	$ ps -fp 1588 - Select process by ppid
	$ ps -f --ppid 1587 - Make Selection Using PID List
	$ ps -fp 1394,1587


10. Print process tree

	$ ps -e --forest
	From this tree we can identify which is the parent process and the child process it forked 
	in a recursive manner.
	To print the process tree for a given process.
	
	$ ps -f --forest -C sshd ( -C for command )
	OR
	$ ps -ef --forest | grep sshd


11. Print Process Threads

	$ ps -fL -C sshd
	Output:
	LWP: Light Weight Process
	NLWP: Number of Light Weight Process


12. Troubleshoot Linux System Performance.


	To find top running process
	$ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem | head

	The head piping will display for first 10 line of the record, if you want to view more or less 
	pass the line number as -n parameter.

	$ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem | head -n 15
	If you want to sort by cpu value
	$ ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%cpu | head
	If you want to stop any process that is consuming high cpu time
	$ kill -o pid

13. To see Real-time Process Monitoring.

	watch -n 1 'ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%mem | head'
	-n : interval in seconds.
	To exit: Ctl + z
	




************************************** Configuring Static, Dynamic IP Address on Ubuntu Server **************************************





1. Check/Display all available network interface
	$ip link show

2. Identifying Ethernet Interfaces
	$sudo ip a OR $ip a
	[Loopback address is a software address (127.0.0.1)]
	$sudo ip addr OR $ip addr
	$sudo lshw –class network
	[Detailed hardware information about network cards on Linux]


3. Check the current IP of the server
	$ifconfig 
	
	
4. Temporary IP address assignment
	
	1). Temporary IP address assigning (This will work on real environment & it is not 
	physically connected to the network)
	
	$sudo ip addr add 10.0.2.20/24 dev enp0s3
	$sudo ip link set dev enp0s3 down
	$sudo ip link set dev enp0s3 up
	$ip address show dev enp0s3
	
	
	
2). Configure Default gateway
		$sudo ip route add default via 10.0.2.1
		$sudo ip route show (to see the default gateway)

3). Add temporary DNS Client address
	
	✓ Edit /etc/resolv.conf
	$sudo vi /etc/resolv.conf
	Add nameserver 8.8.8.8
	
4). To delete all IP configuration
		
		$sudo ip addr flush enp0s3
	
5). Static IP Address assignment.
	
	• Go to netplan directory
		$cd /etc/netplan
	• List out the contents in the netplan
		$ll
		
	 Open the .yaml file 
		$sudo vi 00-installer-config.yaml

	• Then apply the changers 
		$sudo netplan apply
	
	• See the IP address by giving the command “ifconfig”
		$ifconfig

6). Dynamic IP Address Assignment (DHCP) To configure your server to use DHCP dynamic address assignment 
	
	• open the file “/etc/netplan/50-cloud-init.yaml”
		$sudo vi /etc/netplan/00-installer-config.yaml
		Keep the dhcp4 = true
		Save the file and exit
		
	• Apply the changes on configuration by giving the command “netplan apply”
		$sudo netplan apply
		
		
		
		
************************************** Install and Configuring DHCP Server in Ubuntu Server **************************************




1. Update and upgrade the server.
 
2. Now install the DHCP server.

3. Change the network configuration file (00-installer-config.yaml file) with the 
below values.

	addresses: [10.10.10.50/24]
	routes: 
	- to: default
	via: 10.10.10.1
	nameservers:
	address: [8.8.8.8, 8.8.4.4]

4. Apply the changes.

5. Configure the dhcpd.conf file.
	i. Before configure the file take a backup of the file.
	ii. After taking the backup open the dhcpd.conf file with any text editor
6. Do the changes in the configuration file with the below values.
subnet 10.10.10.0 netmask 255.255.255.0 {
range 10.10.10.100 10.10.10.200;
option subnet-mask 255.255.255.0;
option domain-name-servers 8.8.8.8, 8.8.4.4;
}

7. Save the file and exit.

8. Restart the DHCP server.

9. Check the status of the DHCP server. (Check the status is in active or not, if not troubleshoot 
the problem)

10. In client side,
i. Open the Ubuntu Desktop as a client in your virtual environment. (If Ubuntu 
desktop not available then install)

11. Now check your IP address of your client OS. (Ubuntu desktop)

12. In your DHCP server side, check the leased addresses.

To assign fixed IP address with a mac address


1. Configure the dhcpd.conf file with the below values,
a. Client host name
b. Client host mac address
2. Restart the DHCP service again and check the status as well.
3. Now check the IP address of the client machine.
4. In your DH


**************************** steps to install ubuntu server ***********************************************************


install and configure Ubuntu Server on Windows using Virtual Box

I. Prerequisite

1. Download virtual box using the website “virtualbox.org”.
2. Install virtual box on your windows host.
3. Download iso file of Ubuntu Server by visiting the website “ubuntu.com”.

II. Creating Ubuntu Virtual Machine (VM)

1. Start VirtualBox and click on New button to create new virtual machine.
2. Enter name of VM 
Ex. “Ubuntu_Server”
3. Select OS Type: “Linux”
4. Select Version: “Ubuntu(64bit)”
5. Then Click to Next button.
6. Set VM’s memory size to 2GB and click on Next button.
7. Choose VM’s hard disk option to “Create a virtual hard disk now”.
8. Adjust the disk size to 50GB.
9. Click Next button.
10. Click Finish button.


III. Setting up boot device

1. Select the VM from left panel on Virtual Box, right click and open Settings.
2. Click on Storage title and Select CD ROM icon under the Controller: IDE.
3. Click on CD ROM icon under the Attribute on the left side to select.
4. Choose Virtual Optical Disk File.
5. Locate the Ubuntu CD image file you have.

IV. Setting up Network Interface.

1. Click on Network title.
2. While Enable Network Adapter selected, choose Attached to NAT then click Ok.
Compiled By: M.N.M Shakoor Supervised By: W. Sriwathsan 2
Note: NAT (Network Address Translation) - which get the IP from host and change/translate 
into another private IP and assign to guest.
While using NAT, guest can access the host but host can’t access the guest. While the bridge 
is bidirectional 

V. Installing Ubuntu Server.


1) Initial installation settings.

1) Start “Ubuntu_Server”.

2) Select “Try or Install Ubuntu server”.

3) Choose your preferred language as “English”.

4) Choose “Continue without updating”.

5) In keyboard configuration, select Keyboard layout and variant as “English (Us)”.

6) In type of install, select “Ubuntu Server” and select “Search for third-party 
drivers” in Additional options.

7) In the Network Connection, keep the setting as it is.

8) For Configure proxy, leave the proxy address blank.

9) For Ubuntu mirror address, leave the default as it is.

2) Disk Configuration.

1. In guided storage configuration Select “Custom storage layout”.
Note: Now we will do LVM partition on this disk drive. In Linux system, we need to create 
minimum (/boot) boot, swap, (/) root, (/home) home, (/var) var and (/usr) usr partition. 
Among these partitions, /boot and swap should be out of LVM. So, at first, we will do these 
two partitions before creating LVM.
2. Creating “Boot Partition”.
2.1. Select “Free Space” from “AVAILABLE DEVICES”. 
2.2. Select “Add GPT Partition” option.
2.3. From Adding GPT Partition to “VBOX_HARDDISK_VBxxxxxxxxxxxxxxxx” section, Put size (for example: 1024M) for the boot partition in 
Size input box.
2.4. Choose partition format (for example: ext4) from Format drop down menu.
2.5. Choose /boot from Mount drop down menu.
2.6. Now select Create option.

3. Creating “Swap Partition”.

3.1. Select “Free Space” from “AVAILABLE DEVICES”. 
3.2. Select Add “GPT Partition” option.
3.3. From Adding GPT Partition to “VBOX_HARDDISK_VBxxxxxxxxxxxxxxxx” section, Put size (for example: 8GB) for the swap partition in Size 
input box.
3.4. Choose swap from the Format drop down menu.

3.5. Now select Create option.
✓ Boot partition and Swap partition will now be created and will be available in “FILE 
SYSTEM SUMMERY” section of Storage Configuration window.

4. Create “LVM partition”.

4.1. Select “Free Space” from “AVAILABLE DEVICES”. 
4.2. Select Add “GPT Partition” option.
4.3. From Adding GPT Partition to “VBOX_HARDDISK_VBxxxxxxxxxxxxxxxx” section, Put size (for example: 40G) for the LVM partition in Size 
input box.
4.4. Choose leave unformatted from Format drop down menu.
4.5. Now select Create option and hit Enter key.
Note: Now Create volume group (LVM) option will be enabled and we will be able to do LVM 
partition. To create LVM partition, at first, we have to create Volume Group (VG).


5. Creating “LVM Volume Group (VG)”.

5.1. From “AVAILABLE DEVICES” section, select “Create volume group 
(LVM)” option.
5.2. Enter a name for “volume group name” or keep the default one if you wish.
Ex: “lvmgroup”
5.3. Now select partition option from Devices section and press Space key to 
enable it.
5.4. Select Create option and hit Enter key.
✓ Volume group (lvmgroup) will now be available in “AVAILABLE DEVICES” section. 
We will now be able to create LVM partition from here.

6. Creating “LVM Root (/) Partition”.

6.1. Select the free space in “AVALIABLE DEVICES” created volume group 
(lvmgroup).
6.2. Select Create Logical Volume option.
6.3. Enter a name for root partition as “lv-root” in Name input field.
6.4. Put size (for example: 15G) for the root partition in Size input box.
6.5. Choose partition format (for example: ext4) from Format dropdown menu.
6.6. Now select Create option.

✓ Root (/) partition will now be created and will be available in “FILE SYSTEM 
SUMMERY” section of Storage Configuration window.
✓ Similarly, create /usr, /home and /var LVM partition from volume group “lvmgroup”.
✓ Use the below table to create the /var, /usr, /home partition
Partition Name Size Format Mount
/usr lv-usr 5GB ext4 /usr
/home lv-home 5GB ext4 /home
Compiled By: M.N.M Shakoor Supervised By: W. Sriwathsan 4
/var lv-var 16GB ext4 /var
7. Now select the Done option. The system will now ask to confirm the destructive
 
action Select Continue to confirm the action.

3) Assign Profile Setup
• Your Name: Server_PC
• Server Name: serverpc
• Username: student
• Password: student@1234

4) Final Configuration

• Select the “Install OpenSSH Server” option and Select Done option to start 
installation.

5) Finalizing Ubuntu Server Installation


1. Check ssh is installed in your Guest OS (Linux Server)
• $ssh
✓ If ssh not installed 

I. Install ssh on Guest Os
• $sudo apt install openssh-server

2. Verify the ssh service is running.
• $sudo systemctl status ssh.

3. If the status is not active (running) enable the ssh server and start it.
• $sudo systemctl enable ssh
• $sudo systemctl start ssh

VII. Install Putty
1. Download putty using the website “https://www.putty.org/”.
2. Install putty on your windows host.

VIII. Virtual Box Settings

1. Go to 

Oracle Virtual Box Manager → Machine → Settings → Network → Adapter 1 →
Advanced → Port Forwarding → Add

• Name : ssh
• Protocol : TCP
• Host IP : 127.0.0.1
• Host Port : 2222 (or any unused port)
• Guest IP : 10.0.2.15 (Depends on your guest IP address)
• Guest Port : 22

2. Then click OK.

3. Go to the putty on windows machine.

• In hostname or ip address : 127.0.0.1
• Port : 2222
• Connection type : ssh
4. Then click open.




*********************************************  change permission ******************************************************



chmod permissions filename/directory



# Give read, write, and execute permissions to the owner
chmod u+rwx filename

# Remove write and execute permissions for the group
chmod g-wx filename

# Give read and execute permissions to others
chmod o+rx filename

# Alternatively, you can use numeric values to set permissions directly.
# For example, to set read, write, and execute permissions for the owner,
# read and execute permissions for the group, and read-only permissions for others:
chmod 751 filename




*********************************************  run levels of ubuntu server ******************************************************




1. How do you booting and shutting down of Ubuntu Server

    To boot Ubuntu Server, you start the server or restart it if it's already running. The server will go through the boot process and load the operating system.

    To shut down Ubuntu Server, you can use the "shutdown" command with appropriate options, such as "sudo shutdown now" to shut down immediately or "sudo shutdown -r now" to restart the server immediately.

2. Explain different run levels (level 0 to level 6) in Linux

    Run Level 0: Halt - System shutdown.
    Run Level 1: Single User Mode - Single-user mode, used for system maintenance and recovery.
    Run Level 2: Multi-User Mode without Networking - User-defined.
    Run Level 3: Multi-User Mode with Networking - The standard multi-user mode with networking enabled.
    Run Level 4: Not used/user-defined.
    Run Level 5: Multi-User Mode with Graphical Interface - The standard multi-user mode with a graphical desktop.
    Run Level 6: Reboot - System restart.




***************************** Install Apache, MySQL & PHP on Ubuntu Server ****************************************



1. Install Apache webserver.

1.1. Update Ubuntu Server

sudo apt update


1.2. Upgrade Ubuntu Server

sudo apt upgrade
sudo reboot

1.3. Install Apache web server

sudo apt install apache2
sudo systemctl status apache2


1.4. Check Apache webserver running or not.

sudo systemctl status apache2


1.5. To test apache web server, open your web browser and access the apache test page by 
navigating to http://localhost/
If you can see Apache2 Ubuntu Default Page, Apache server is working

php-TCP-127.0.0.1-80.10.0.2.15-80
http://127.0.0.1/myform.php


2. Install MySQL



2.1. To install MySQL on Ubuntu run

sudo apt install mysql-server


2.2. Verify if MySQL service is running or not by

sudo systemctl status mysql



2.3. To view passwords of MySQL

sudo mysql -u root -p
SELECT User, Host FROM mysql.user;


2.4. To add the password to mysql root.

ALTER USER 'username'@'localhost' IDENTIFIED BY 'new_password';


2.5. Check the password is set properly to the MySQL
First leave from logged in MySQL
Again log-in to the MySQL




3. Install PHP

3.1. Install PHP


sudo apt install php


3.2. After installing PHP, create info.php in the apache root document folder
In the created file add the following line


3.3. In the created file add the following line

<?php
phpinfo();
?>

3.4. And save and quite the file.

3.5. Restart the apache service to take effect the changes

3.6. Test PHP

php-TCP-127.0.0.1-80.10.0.2.15-80
http://127.0.0.1/info.php

Open up your web browser and navigate to localhost:8080 /info.php in address bar
✓ Check the version of PHP
$ php -version


Now we are going to create an HTML form to take your username and 
password to store in a mysql database using PHP

1. Create an html form in the location of /var/www/html

<!DOCTYPE html>
<html>
<head>
<title>Form site</title>
</head>
<body>
<form method="post" action="myform.php">
Username: <input type="text" name="uname"><br><br>
Password: <input type="password" name="upassword"><br><br>
<input type="submit" value="Submit">
</form>
</body>
</html>


2. Save and exit the file

3. Next create a database and table in mysql

3.1. Login to mysql


3.2. Enter the password for user root (This will be your class password: 'Testwebpw1$')

3.3. Create a database with the name myDB.

3.4. View the list of databases

3.5. Create a table ‘user in database ‘myDB’

3.6. Check the structure of the above created table



# Login to MySQL
mysql -u root -p

# Enter the password for user root ('Testwebpw1$')

# Create a database with the name myDB
CREATE DATABASE myDB;

# View the list of databases
SHOW DATABASES;

# Use the myDB database
USE myDB;

# Create a table 'user' in the database 'myDB'
CREATE TABLE user (
    id INT(11) AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL
);

# Check the structure of the above-created table
DESCRIBE user;

# Exit MySQL
exit;



3.7. Finally create the php file which connect both html and mysql database.

<?php
$host = "localhost";
$dbusername = "root";
$dbpassword = "Testwebpw1$";
$dbname = "myDB";
//Create Connection
$conn = new mysqli ($host, $dbusername, $dbpassword, 
$dbname);
$username = $_POST['uname'];
$password = $_POST['upassword'];
//Insert value in database table
$sql = "INSERT INTO user (name, password) values 
('$username', '$password')";
if($conn->query($sql)){
echo "New record is inserted successfully";
}
else {
echo "Error: ". $sql . "<br>". $conn->error;
}
$conn->close();
?>

4. Save the file and exit

5. Now open the HTML form and test it using your browser.

http://127.0.0.1/form.html
